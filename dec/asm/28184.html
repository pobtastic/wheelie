<!DOCTYPE html>
<html>
<head>
<title>Wheelie: Routine at 28184</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../wheelie.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="28072.html">28072</a>
</td>
<td class="up">Up: <a href="../maps/all.html#28184">Map</a></td>
<td class="next">
Next: <a href="28483.html">28483</a>
</td>
</tr>
</table>
<div class="description">28184: Routine at 6E18</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="27648.html">Game_Loop</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28184"></span>28184</td>
<td class="instruction">CALL <a href="26797.html">RemoveSprites</a></td>
<td class="comment-1" rowspan="1">Call <a href="26797.html">RemoveSprites</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28187"></span>28187</td>
<td class="instruction">LD HL,(30778)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a href="30778.html">30778</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28190"></span>28190</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28191"></span>28191</td>
<td class="instruction">CP 240</td>
<td class="comment-1" rowspan="2">Jump to <a href="28184.html#28247">28247</a> if <span class="register">A</span> is higher than 240.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28193"></span>28193</td>
<td class="instruction">JR NC,<a href="28184.html#28247">28247</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28195"></span>28195</td>
<td class="instruction">LD (30772),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="30772.html">PlayerSpriteID</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28198"></span>28198</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28199"></span>28199</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28200"></span>28200</td>
<td class="instruction">AND %00001111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28202"></span>28202</td>
<td class="instruction">LD (30746),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="30746.html">30746</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28205"></span>28205</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28206"></span>28206</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28207"></span>28207</td>
<td class="instruction">LD (30778),HL</td>
<td class="comment-1" rowspan="1">Write <span class="register">HL</span> to *<a href="30778.html">30778</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28210"></span>28210</td>
<td class="instruction">LD HL,30771</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="30771.html">PlayerPosition_Y</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28213"></span>28213</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1">RLCA.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28214"></span>28214</td>
<td class="instruction">JR NC,<a href="28184.html#28217">28217</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28217">28217</a> if {} is higher.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28216"></span>28216</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-1" rowspan="1">Decrease *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28217"></span>28217</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1">RLCA.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28218"></span>28218</td>
<td class="instruction">JR NC,<a href="28184.html#28221">28221</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28221">28221</a> if {} is higher.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28220"></span>28220</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="1">Increment *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28221"></span>28221</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1">RLCA.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28222"></span>28222</td>
<td class="instruction">JR NC,<a href="28184.html#28232">28232</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28232">28232</a> if {} is higher.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28224"></span>28224</td>
<td class="instruction">CALL <a href="26012.html">ScrollPlayarea</a></td>
<td class="comment-1" rowspan="1">Call <a href="26012.html">ScrollPlayarea</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28227"></span>28227</td>
<td class="instruction">CALL <a href="26601.html">DrawPlayarea</a></td>
<td class="comment-1" rowspan="1">Call <a href="26601.html">DrawPlayarea</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28230"></span>28230</td>
<td class="instruction">JR <a href="28184.html#28241">28241</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28241">28241</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28232"></span>28232</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1">RLCA.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28233"></span>28233</td>
<td class="instruction">JR NC,<a href="28184.html#28241">28241</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28241">28241</a> if {} is higher.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28235"></span>28235</td>
<td class="instruction">CALL <a href="26192.html">26192</a></td>
<td class="comment-1" rowspan="1">Call <a href="26192.html">26192</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28238"></span>28238</td>
<td class="instruction">CALL <a href="26601.html">DrawPlayarea</a></td>
<td class="comment-1" rowspan="1">Call <a href="26601.html">DrawPlayarea</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28241"></span>28241</td>
<td class="instruction">CALL <a href="27437.html">Handler: PlayerSprite</a></td>
<td class="comment-1" rowspan="1">Call <a href="27437.html">Handler: PlayerSprite</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28244"></span>28244</td>
<td class="instruction">CALL <a href="27977.html#27984">27984</a></td>
<td class="comment-1" rowspan="1">Call <a href="27977.html#27984">27984</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28247"></span>28247</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Stash <span class="register">AF</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28248"></span>28248</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="6">No operation.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28249"></span>28249</td>
<td class="instruction">NOP</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28250"></span>28250</td>
<td class="instruction">NOP</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28251"></span>28251</td>
<td class="instruction">NOP</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28252"></span>28252</td>
<td class="instruction">NOP</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28253"></span>28253</td>
<td class="instruction">NOP</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28254"></span>28254</td>
<td class="instruction">CALL <a href="27437.html">Handler: PlayerSprite</a></td>
<td class="comment-1" rowspan="1">Call <a href="27437.html">Handler: PlayerSprite</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28257"></span>28257</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28258"></span>28258</td>
<td class="instruction">AND %00001111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28260"></span>28260</td>
<td class="instruction">SUB 8</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28262"></span>28262</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28263"></span>28263</td>
<td class="instruction">LD A,(30754)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="30754.html">Speed</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28266"></span>28266</td>
<td class="instruction">BIT 7,A</td>
<td class="comment-1" rowspan="1">Test bit 7 of <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28268"></span>28268</td>
<td class="instruction">LD A,18</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=18.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28270"></span>28270</td>
<td class="instruction">JR Z,<a href="28184.html#28274">28274</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28274">28274</a> if {} is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28272"></span>28272</td>
<td class="instruction">LD A,13</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=13.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28274"></span>28274</td>
<td class="instruction">ADD A,B</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=<span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28275"></span>28275</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28276"></span>28276</td>
<td class="instruction">LD A,(30771)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="30771.html">PlayerPosition_Y</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28279"></span>28279</td>
<td class="instruction">SUB 2</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28281"></span>28281</td>
<td class="instruction">LD H,64</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=64.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28283"></span>28283</td>
<td class="instruction">CP 8</td>
<td class="comment-1" rowspan="2">Jump to <a href="28184.html#28289">28289</a> if <span class="register">A</span> is lower than 8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28285"></span>28285</td>
<td class="instruction">JR C,<a href="28184.html#28289">28289</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28287"></span>28287</td>
<td class="instruction">LD H,72</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=72.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28289"></span>28289</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28291"></span>28291</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="3">RRCA.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28292"></span>28292</td>
<td class="instruction">RRCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28293"></span>28293</td>
<td class="instruction">RRCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28294"></span>28294</td>
<td class="instruction">ADD A,L</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=<span class="register">L</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28295"></span>28295</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28296"></span>28296</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28297"></span>28297</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="2">Decrease <span class="register">L</span> by two.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28298"></span>28298</td>
<td class="instruction">DEC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28299"></span>28299</td>
<td class="instruction">LD DE,30944</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="30944.html">30944</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28302"></span>28302</td>
<td class="instruction">LD C,40</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=40.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28304"></span>28304</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-1" rowspan="1">Exchange the <span class="register">DE</span> and <span class="register">HL</span> registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28305"></span>28305</td>
<td class="instruction">LD B,4</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28307"></span>28307</td>
<td class="instruction">LDI</td>
<td class="comment-1" rowspan="1">LDI.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28309"></span>28309</td>
<td class="instruction">DJNZ <a href="28184.html#28307">28307</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28184.html#28307">28307</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28311"></span>28311</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">E</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28312"></span>28312</td>
<td class="instruction">SUB 4</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28314"></span>28314</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28315"></span>28315</td>
<td class="instruction">INC D</td>
<td class="comment-1" rowspan="1">Increment <span class="register">D</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28316"></span>28316</td>
<td class="instruction">DEC C</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">C</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28317"></span>28317</td>
<td class="instruction">JR NZ,<a href="28184.html#28305">28305</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28305">28305</a> until <span class="register">C</span> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28319"></span>28319</td>
<td class="instruction">LD A,D</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">D</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28320"></span>28320</td>
<td class="instruction">SUB 73</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=73.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28322"></span>28322</td>
<td class="instruction">SBC A,A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28323"></span>28323</td>
<td class="instruction">ADD A,89</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=89.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28325"></span>28325</td>
<td class="instruction">LD D,A</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28326"></span>28326</td>
<td class="instruction">LD B,4</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28328"></span>28328</td>
<td class="instruction">LD A,6</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=6.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28330"></span>28330</td>
<td class="instruction">LD (DE),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28331"></span>28331</td>
<td class="instruction">INC E</td>
<td class="comment-1" rowspan="1">Increment <span class="register">E</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28332"></span>28332</td>
<td class="instruction">DJNZ <a href="28184.html#28330">28330</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28184.html#28330">28330</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28334"></span>28334</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28335"></span>
<div class="comments">
<div class="paragraph">
Play the "player dead" audio.
</div>
<div class="paragraph">
<audio controls="" src="../../audio/dead.wav">
<p>Your browser doesn't support HTML5 audio. Here is a <a href="../../audio/dead.wav">link to the audio</a> instead.</p>
</audio>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28335"></span>28335</td>
<td class="instruction">LD B,20</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=20 (counter; 20 loops).</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerDead</td>
<td class="address-2"><span id="28337"></span>28337</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Stash <span class="register">BC</span> and <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28338"></span>28338</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28339"></span>28339</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28340"></span>28340</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28342"></span>28342</td>
<td class="instruction">LD D,0</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=0.</td>
</tr>
<tr>
<td class="asm-label">PlayAudioDead</td>
<td class="address-2"><span id="28344"></span>28344</td>
<td class="instruction">OUT (254),A</td>
<td class="comment-1" rowspan="1">Send to the speaker.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28346"></span>28346</td>
<td class="instruction">XOR %00010000</td>
<td class="comment-1" rowspan="1">Flip the speaker (bit 4) on/ off.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28348"></span>28348</td>
<td class="instruction">LD B,D</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=<span class="register">D</span>.</td>
</tr>
<tr>
<td class="asm-label">AudioDead_Loop</td>
<td class="address-2"><span id="28349"></span>28349</td>
<td class="instruction">DJNZ <a href="28184.html#28349">AudioDead_Loop</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28184.html#28349">AudioDead_Loop</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28351"></span>28351</td>
<td class="instruction">DEC D</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">D</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28352"></span>28352</td>
<td class="instruction">JR NZ,<a href="28184.html#28344">PlayAudioDead</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28344">PlayAudioDead</a> until <span class="register">D</span> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28354"></span>28354</td>
<td class="instruction">LD B,8</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=8 (counter; height of the carousel).</td>
</tr>
<tr>
<td class="asm-label">Carousel_Loop</td>
<td class="address-2"><span id="28356"></span>28356</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28357"></span>28357</td>
<td class="instruction">RLD</td>
<td class="comment-1" rowspan="1">RLD.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28359"></span>28359</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28360"></span>28360</td>
<td class="instruction">RLD</td>
<td class="comment-1" rowspan="1">RLD.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28362"></span>28362</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">Increment <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28363"></span>28363</td>
<td class="instruction">OR (HL)</td>
<td class="comment-1" rowspan="1">Set the bits from *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28364"></span>28364</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28365"></span>28365</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Increment <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28366"></span>28366</td>
<td class="instruction">DJNZ <a href="28184.html#28356">Carousel_Loop</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28184.html#28356">Carousel_Loop</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28368"></span>28368</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="2">Restore <span class="register">HL</span> and <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28369"></span>28369</td>
<td class="instruction">POP BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28370"></span>28370</td>
<td class="instruction">DJNZ <a href="28184.html#28337">Handler_PlayerDead</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28184.html#28337">Handler_PlayerDead</a> until counter is zero.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28372"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="29025.html">29025</a> and <a href="30423.html">30423</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28372"></span>28372</td>
<td class="instruction">CALL <a href="26797.html">RemoveSprites</a></td>
<td class="comment-1" rowspan="1">Call <a href="26797.html">RemoveSprites</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28375"></span>28375</td>
<td class="instruction">LD A,(30776)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="30776.html">30776</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28378"></span>28378</td>
<td class="instruction">BIT 7,A</td>
<td class="comment-1" rowspan="1">Test bit 7 of <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28380"></span>28380</td>
<td class="instruction">LD HL,47872</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="47872.html">47872</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28383"></span>28383</td>
<td class="instruction">LD A,128</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=128.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28385"></span>28385</td>
<td class="instruction">JR Z,<a href="28184.html#28390">28390</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28390">28390</a> if {} is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28387"></span>28387</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28388"></span>28388</td>
<td class="instruction">LD L,4</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28390"></span>28390</td>
<td class="instruction">LD (30769),HL</td>
<td class="comment-1" rowspan="1">Write <span class="register">HL</span> to *<a href="30769.html">30769</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28393"></span>28393</td>
<td class="instruction">LD HL,30768</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="30768.html">30768</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28396"></span>28396</td>
<td class="instruction">LD (HL),3</td>
<td class="comment-1" rowspan="1">Write 3 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28398"></span>28398</td>
<td class="instruction">JR Z,<a href="28184.html#28401">28401</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28401">28401</a> if {} is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28400"></span>28400</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="1">Increment *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28401"></span>28401</td>
<td class="instruction">LD L,33</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=33.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28403"></span>28403</td>
<td class="instruction">LD B,3</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28405"></span>28405</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28406"></span>28406</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">Increment <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28407"></span>28407</td>
<td class="instruction">DJNZ <a href="28184.html#28405">28405</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28184.html#28405">28405</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28409"></span>28409</td>
<td class="instruction">LD B,8</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28411"></span>28411</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28413"></span>28413</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">Increment <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28414"></span>28414</td>
<td class="instruction">DJNZ <a href="28184.html#28411">28411</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="28184.html#28411">28411</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28416"></span>28416</td>
<td class="instruction">LD L,26</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=26.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28418"></span>28418</td>
<td class="instruction">LD (HL),1</td>
<td class="comment-1" rowspan="1">Write 1 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28420"></span>28420</td>
<td class="instruction">LD HL,0</td>
<td class="comment-1" rowspan="2">Write 0000 to *<a href="30740.html">30740</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28423"></span>28423</td>
<td class="instruction">LD (30740),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28426"></span>28426</td>
<td class="instruction">LD HL,(30774)</td>
<td class="comment-1" rowspan="2">Write *<a href="30774.html">30774</a> to *<a href="30766.html">LevelProgressPointer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28429"></span>28429</td>
<td class="instruction">LD (30766),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28432"></span>28432</td>
<td class="instruction">BIT 7,A</td>
<td class="comment-1" rowspan="1">Test bit 7 of <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28434"></span>28434</td>
<td class="instruction">LD B,3</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28436"></span>28436</td>
<td class="instruction">JR NZ,<a href="28184.html#28439">28439</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28439">28439</a> if {} is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28438"></span>28438</td>
<td class="instruction">INC B</td>
<td class="comment-1" rowspan="1">Increment <span class="register">B</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28439"></span>28439</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">H</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28440"></span>28440</td>
<td class="instruction">SUB 153</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=153.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28442"></span>28442</td>
<td class="instruction">SUB 5</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=5.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28444"></span>28444</td>
<td class="instruction">JR NC,<a href="28184.html#28442">28442</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28442">28442</a> if {} is higher.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28446"></span>28446</td>
<td class="instruction">ADD A,5</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=5.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28448"></span>28448</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28449"></span>28449</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28450"></span>28450</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28451"></span>28451</td>
<td class="instruction">LD (30771),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="30771.html">PlayerPosition_Y</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28454"></span>28454</td>
<td class="instruction">LD A,158</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=158.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28456"></span>28456</td>
<td class="instruction">ADD A,5</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=5.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28458"></span>28458</td>
<td class="instruction">CP H</td>
<td class="comment-1" rowspan="2">Jump to <a href="28184.html#28456">28456</a> if <span class="register">A</span> is lower than <span class="register">H</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28459"></span>28459</td>
<td class="instruction">JR C,<a href="28184.html#28456">28456</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28461"></span>28461</td>
<td class="instruction">SUB 5</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=5.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28463"></span>28463</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28464"></span>28464</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="3"><span class="register">L</span>-=<span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28465"></span>28465</td>
<td class="instruction">SUB B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28466"></span>28466</td>
<td class="instruction">LD L,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28467"></span>28467</td>
<td class="instruction">JR NC,<a href="28184.html#28473">28473</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28184.html#28473">28473</a> if {} is higher.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28469"></span>28469</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="3"><span class="register">H</span>-=5.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28470"></span>28470</td>
<td class="instruction">SUB 5</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28472"></span>28472</td>
<td class="instruction">LD H,A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-2"><span id="28473"></span>28473</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28474"></span>28474</td>
<td class="instruction">CALL <a href="26624.html">26624</a></td>
<td class="comment-1" rowspan="1">Call <a href="26624.html">26624</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28477"></span>28477</td>
<td class="instruction">CALL <a href="30031.html#30034">SpendLife</a></td>
<td class="comment-1" rowspan="1">Call <a href="30031.html#30034">SpendLife</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="28480"></span>28480</td>
<td class="instruction">CALL <a href="27818.html#27927">GameInitialisation_5</a></td>
<td class="comment-1" rowspan="1">Call <a href="27818.html#27927">GameInitialisation_5</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="28072.html">28072</a>
</td>
<td class="up">Up: <a href="../maps/all.html#28184">Map</a></td>
<td class="next">
Next: <a href="28483.html">28483</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Microsphere &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.6.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/wheelie/">Source code</a>.</div>
<div><a href="../../asm/6E18.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>