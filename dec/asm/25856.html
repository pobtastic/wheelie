<!DOCTYPE html>
<html>
<head>
<title>Wheelie: Routine at 25856</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../wheelie.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="25853.html">25853</a>
</td>
<td class="up">Up: <a href="../maps/all.html#25856">Map</a></td>
<td class="next">
Next: <a href="25955.html">25955</a>
</td>
</tr>
</table>
<div class="description">25856: Initialise Level</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="27818.html">GameInitialisation</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="25856"></span>
<div class="comments">
<div class="paragraph">
<table class="">
<tr>
<td class="" colspan="1" rowspan="1"><img alt="level-1" src="../../images/scr/level-1.png" /></td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">InitialiseLevel</td>
<td class="address-2"><span id="25856"></span>25856</td>
<td class="instruction">LD DE,40448</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=<a href="40448.html">LevelBuffer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25859"></span>25859</td>
<td class="instruction">LD HL,35168</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="35168.html">Data_Level_1</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25862"></span>25862</td>
<td class="instruction">CALL <a href="25636.html">CopyLevelDataToBuffer</a></td>
<td class="comment-1" rowspan="1">Call <a href="25636.html">CopyLevelDataToBuffer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25865"></span>25865</td>
<td class="instruction">LD HL,41217</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=41217.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25868"></span>25868</td>
<td class="instruction">LD B,10</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=10.</td>
</tr>
<tr>
<td class="asm-label">InitialiseLevel_0</td>
<td class="address-2"><span id="25870"></span>25870</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25872"></span>25872</td>
<td class="instruction">DEC H</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25873"></span>25873</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25875"></span>25875</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Increment <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25876"></span>25876</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">Increment <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25877"></span>25877</td>
<td class="instruction">DJNZ <a href="25856.html#25870">InitialiseLevel_0</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="25856.html#25870">InitialiseLevel_0</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25879"></span>25879</td>
<td class="instruction">LD (HL),35</td>
<td class="comment-1" rowspan="1">Write 35 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25881"></span>25881</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Switch to the shadow registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25882"></span>25882</td>
<td class="instruction">LD A,10</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=10.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25884"></span>25884</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1">No operation.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25885"></span>25885</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label">InitialiseLevel_1</td>
<td class="address-2"><span id="25886"></span>25886</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Switch to the shadow registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25887"></span>25887</td>
<td class="instruction">CALL <a href="25600.html">GetRandomNumber</a></td>
<td class="comment-1" rowspan="1">Call <a href="25600.html">GetRandomNumber</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25890"></span>25890</td>
<td class="instruction">AND %00011111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25892"></span>25892</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25893"></span>25893</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25894"></span>25894</td>
<td class="instruction">ADD A,A</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25895"></span>25895</td>
<td class="instruction">ADD A,B</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=<span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25896"></span>25896</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="3">RRCA.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25897"></span>25897</td>
<td class="instruction">RRCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25898"></span>25898</td>
<td class="instruction">RRCA</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25899"></span>25899</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25900"></span>25900</td>
<td class="instruction">AND %00011111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25902"></span>25902</td>
<td class="instruction">ADD A,138</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=138.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25904"></span>25904</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25905"></span>25905</td>
<td class="instruction">LD A,L</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">L</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25906"></span>25906</td>
<td class="instruction">AND %11100000</td>
<td class="comment-1" rowspan="1">Keep only bits 5-7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25908"></span>25908</td>
<td class="instruction">LD L,A</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25909"></span>25909</td>
<td class="instruction">CALL <a href="25636.html">CopyLevelDataToBuffer</a></td>
<td class="comment-1" rowspan="1">Call <a href="25636.html">CopyLevelDataToBuffer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25912"></span>25912</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Switch to the shadow registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25913"></span>25913</td>
<td class="instruction">DJNZ <a href="25856.html#25886">InitialiseLevel_1</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="25856.html#25886">InitialiseLevel_1</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25915"></span>25915</td>
<td class="instruction">EXX</td>
<td class="comment-1" rowspan="1">Switch to the shadow registers.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25916"></span>25916</td>
<td class="instruction">LD HL,35168</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="35168.html">Data_Level_1</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25919"></span>25919</td>
<td class="instruction">CALL <a href="25636.html">CopyLevelDataToBuffer</a></td>
<td class="comment-1" rowspan="1">Call <a href="25636.html">CopyLevelDataToBuffer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25922"></span>25922</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">E</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25923"></span>25923</td>
<td class="instruction">LD HL,756</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=756.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25926"></span>25926</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="2">Jump to <a href="25856.html#25931">InitialiseLevel_2</a> if <span class="register">A</span> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25927"></span>25927</td>
<td class="instruction">JR NZ,<a href="25856.html#25931">InitialiseLevel_2</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25929"></span>25929</td>
<td class="instruction">LD H,254</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=254.</td>
</tr>
<tr>
<td class="asm-label">InitialiseLevel_2</td>
<td class="address-2"><span id="25931"></span>25931</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>+=<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25932"></span>25932</td>
<td class="instruction">LD (HL),34</td>
<td class="comment-1" rowspan="1">Write 34 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25934"></span>25934</td>
<td class="instruction">LD B,10</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=10.</td>
</tr>
<tr>
<td class="asm-label">InitialiseLevel_3</td>
<td class="address-2"><span id="25936"></span>25936</td>
<td class="instruction">INC L</td>
<td class="comment-1" rowspan="1">Increment <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25937"></span>25937</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25939"></span>25939</td>
<td class="instruction">DEC H</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25940"></span>25940</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25942"></span>25942</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Increment <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25943"></span>25943</td>
<td class="instruction">DJNZ <a href="25856.html#25936">InitialiseLevel_3</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="25856.html#25936">InitialiseLevel_3</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25945"></span>25945</td>
<td class="instruction">CALL <a href="25664.html">InitialiseGameObjects</a></td>
<td class="comment-1" rowspan="1">Call <a href="25664.html">InitialiseGameObjects</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25948"></span>25948</td>
<td class="instruction">CALL <a href="25770.html">ObjectPlacement_SpecialTerrain</a></td>
<td class="comment-1" rowspan="1">Call <a href="25770.html">ObjectPlacement_SpecialTerrain</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25951"></span>25951</td>
<td class="instruction">CALL <a href="29184.html">InitialiseNewLevel</a></td>
<td class="comment-1" rowspan="1">Call <a href="29184.html">InitialiseNewLevel</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="25954"></span>25954</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="25853.html">25853</a>
</td>
<td class="up">Up: <a href="../maps/all.html#25856">Map</a></td>
<td class="next">
Next: <a href="25955.html">25955</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Microsphere &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.6.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/wheelie/">Source code</a>.</div>
<div><a href="../../asm/6500.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>