<!DOCTYPE html>
<html>
<head>
<title>Wheelie: Routine at 27648</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../wheelie.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="27644.html">27644</a>
</td>
<td class="up">Up: <a href="../maps/all.html#27648">Map</a></td>
<td class="next">
Next: <a href="27818.html">27818</a>
</td>
</tr>
</table>
<div class="description">27648: Game Loop</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="60403.html">WaitForNextFrame</a> and <a href="60416.html">FrameSyncCheck</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Game_Loop</td>
<td class="address-2"><span id="27648"></span>27648</td>
<td class="instruction">LD A,(30763)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="30763.html">30763</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27651"></span>27651</td>
<td class="instruction">XOR %00000001</td>
<td class="comment-1" rowspan="1">Flip bit 0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27653"></span>27653</td>
<td class="instruction">LD (30763),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> back to *<a href="30763.html">30763</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27656"></span>27656</td>
<td class="instruction">LD HL,65535</td>
<td class="comment-1" rowspan="2"><span class="register">SP</span>=65535.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27659"></span>27659</td>
<td class="instruction">LD SP,HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27660"></span>27660</td>
<td class="instruction">LD A,(23672)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C78.html">FRAMES</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27663"></span>27663</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27664"></span>27664</td>
<td class="instruction">LD HL,30746</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="30746.html">30746</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27667"></span>27667</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-1" rowspan="1">Decrease *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27668"></span>27668</td>
<td class="instruction">LD L,90</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=90.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27670"></span>27670</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27671"></span>27671</td>
<td class="instruction">JR NZ,<a href="27648.html#27763">Game_Loop_4</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27648.html#27763">Game_Loop_4</a> if *<span class="register">HL</span> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27673"></span>27673</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="1">Increment *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27674"></span>27674</td>
<td class="instruction">LD L,43</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=43.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27676"></span>27676</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27677"></span>27677</td>
<td class="instruction">XOR %00000001</td>
<td class="comment-1" rowspan="1">Flip bit 0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27679"></span>27679</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27680"></span>27680</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27681"></span>27681</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27682"></span>27682</td>
<td class="instruction">LD A,2</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27684"></span>27684</td>
<td class="instruction">LD (30756),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27687"></span>27687</td>
<td class="instruction">LD A,(30762)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27690"></span>27690</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27691"></span>27691</td>
<td class="instruction">JP NZ,<a href="28184.html">Handler_GameOver</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27694"></span>27694</td>
<td class="instruction">CALL <a href="26797.html">RemoveSprites</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27697"></span>27697</td>
<td class="instruction">LD A,(30754)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27700"></span>27700</td>
<td class="instruction">BIT 7,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27702"></span>27702</td>
<td class="instruction">JR Z,<a href="27648.html#27715">Game_Loop_0</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27704"></span>27704</td>
<td class="instruction">CALL <a href="26012.html">ScrollPlayarea</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27707"></span>27707</td>
<td class="instruction">CALL <a href="26601.html">DrawPlayarea</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27710"></span>27710</td>
<td class="instruction">CALL <a href="27136.html">27136</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27713"></span>27713</td>
<td class="instruction">JR <a href="27648.html#27724">Game_Loop_1</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">Game_Loop_0</td>
<td class="address-2"><span id="27715"></span>27715</td>
<td class="instruction">CALL <a href="26192.html">26192</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27718"></span>27718</td>
<td class="instruction">CALL <a href="26601.html">DrawPlayarea</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27721"></span>27721</td>
<td class="instruction">CALL <a href="27308.html">27308</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">Game_Loop_1</td>
<td class="address-2"><span id="27724"></span>27724</td>
<td class="instruction">CALL <a href="29379.html">29379</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27727"></span>27727</td>
<td class="instruction">CALL <a href="29457.html">29457</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27730"></span>27730</td>
<td class="instruction">CALL <a href="27464.html">GetControls</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27733"></span>27733</td>
<td class="instruction">CALL <a href="27468.html">Handler_PlayerMovement</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27736"></span>27736</td>
<td class="instruction">LD A,(30754)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27739"></span>27739</td>
<td class="instruction">BIT 7,A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27741"></span>27741</td>
<td class="instruction">JR Z,<a href="27648.html#27744">Game_Loop_2</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27743"></span>27743</td>
<td class="instruction">CPL</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">Game_Loop_2</td>
<td class="address-2"><span id="27744"></span>27744</td>
<td class="instruction">SUB 102</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27746"></span>27746</td>
<td class="instruction">JR NC,<a href="27648.html#27749">Game_Loop_3</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27748"></span>27748</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">Game_Loop_3</td>
<td class="address-2"><span id="27749"></span>27749</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27751"></span>27751</td>
<td class="instruction">SRL A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27753"></span>27753</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27754"></span>27754</td>
<td class="instruction">LD (30746),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27757"></span>27757</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27758"></span>27758</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27759"></span>27759</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27760"></span>27760</td>
<td class="instruction">CALL <a href="30268.html">Handler_Fuel</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">Game_Loop_4</td>
<td class="address-2"><span id="27763"></span>27763</td>
<td class="instruction">LD A,(30763)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27766"></span>27766</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27767"></span>27767</td>
<td class="instruction">JR NZ,<a href="27648.html#27791">Game_Loop_6</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27769"></span>27769</td>
<td class="instruction">LD A,(30762)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27772"></span>27772</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27773"></span>27773</td>
<td class="instruction">JR NZ,<a href="27648.html#27784">Game_Loop_5</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27775"></span>27775</td>
<td class="instruction">CALL <a href="29379.html">29379</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27778"></span>27778</td>
<td class="instruction">CALL <a href="27464.html">GetControls</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27781"></span>27781</td>
<td class="instruction">CALL <a href="27468.html">Handler_PlayerMovement</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">Game_Loop_5</td>
<td class="address-2"><span id="27784"></span>27784</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27785"></span>27785</td>
<td class="instruction">LD (30756),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27788"></span>27788</td>
<td class="instruction">CALL <a href="27977.html#27984">27984</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">Game_Loop_6</td>
<td class="address-2"><span id="27791"></span>27791</td>
<td class="instruction">LD A,(30756)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27794"></span>27794</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27795"></span>27795</td>
<td class="instruction">JR NZ,<a href="27648.html#27803">Game_Loop_7</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27797"></span>27797</td>
<td class="instruction">CALL <a href="26797.html">RemoveSprites</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27800"></span>27800</td>
<td class="instruction">CALL <a href="29457.html">29457</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label">Game_Loop_7</td>
<td class="address-2"><span id="27803"></span>27803</td>
<td class="instruction">CALL <a href="27977.html#27984">27984</a></td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27806"></span>27806</td>
<td class="instruction">HALT</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27807"></span>27807</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27808"></span>27808</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27809"></span>27809</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27810"></span>27810</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27811"></span>27811</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27812"></span>27812</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27813"></span>27813</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27814"></span>27814</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27815"></span>27815</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27816"></span>27816</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27817"></span>27817</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="27644.html">27644</a>
</td>
<td class="up">Up: <a href="../maps/all.html#27648">Map</a></td>
<td class="next">
Next: <a href="27818.html">27818</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Microsphere &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.6.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/wheelie/">Source code</a>.</div>
<div><a href="../../asm/6C00.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>