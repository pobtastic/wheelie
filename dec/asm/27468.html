<!DOCTYPE html>
<html>
<head>
<title>Wheelie: Routine at 27468</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../wheelie.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="27464.html">27464</a>
</td>
<td class="up">Up: <a href="../maps/all.html#27468">Map</a></td>
<td class="next">
Next: <a href="27644.html">27644</a>
</td>
</tr>
</table>
<div class="description">27468: Handler: Player Movement</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="27648.html">Game_Loop</a>.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">A</td>
<td class="register-desc">Input state</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerMovement</td>
<td class="address-2"><span id="27468"></span>27468</td>
<td class="instruction">LD (30760),A</td>
<td class="comment-1" rowspan="1">Store the current player input state in *<a href="30760.html">PlayerInput</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27471"></span>
<div class="comments">
<div class="paragraph">
Set up the directional indicator colors based on the input combination. The indicators show which direction the player will move on slopes.
</div>
<div class="paragraph">
Note that the middle body section is shared between the "UP" and "DOWN" arrows, this is why the logic controls three colour variables.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27471"></span>27471</td>
<td class="instruction">LD C,0</td>
<td class="comment-1" rowspan="1">Initialise the "UP" indicator colour in <span class="register">C</span> to BLACK (OFF).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27473"></span>27473</td>
<td class="instruction">LD DE,1542</td>
<td class="comment-1" rowspan="1">Set YELLOW (ON) for both <span class="register">D</span> ("DOWN" indicator) and <span class="register">E</span> (the middle body section of the indicators).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27476"></span>27476</td>
<td class="instruction">BIT 2,A</td>
<td class="comment-1" rowspan="2">Jump to <a href="27468.html#27489">UpdateIndicatorDisplay</a> if "DOWN" is being pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27478"></span>27478</td>
<td class="instruction">JR NZ,<a href="27468.html#27489">UpdateIndicatorDisplay</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27480"></span>
<div class="comments">
<div class="paragraph">
A "DOWN" key is not being pressed, so activate the "UP" indicator.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27480"></span>27480</td>
<td class="instruction">LD C,E</td>
<td class="comment-1" rowspan="1">Change the "UP" indicator colour in <span class="register">C</span> to YELLOW (ON).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27481"></span>27481</td>
<td class="instruction">LD E,0</td>
<td class="comment-1" rowspan="1">Clear the "DOWN" indicator colour in <span class="register">E</span> to BLACK (OFF).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27483"></span>27483</td>
<td class="instruction">BIT 3,A</td>
<td class="comment-1" rowspan="2">Jump to <a href="27468.html#27489">UpdateIndicatorDisplay</a> if "UP" is being pressed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27485"></span>27485</td>
<td class="instruction">JR NZ,<a href="27468.html#27489">UpdateIndicatorDisplay</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27487"></span>
<div class="comments">
<div class="paragraph">
Neither "UP" or "DOWN" are being pressed, so clear both indicators.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27487"></span>27487</td>
<td class="instruction">LD C,E</td>
<td class="comment-1" rowspan="1">Clear the "UP" indicator colour in <span class="register">C</span> to BLACK (OFF).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27488"></span>27488</td>
<td class="instruction">LD D,E</td>
<td class="comment-1" rowspan="1">Clear the middle body section colour in <span class="register">D</span> to BLACK (OFF).</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27489"></span>
<div class="comments">
<div class="paragraph">
Paint the indicators.
</div>
<div class="paragraph">
First paint the "UP" section.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">UpdateIndicatorDisplay</td>
<td class="address-2"><span id="27489"></span>27489</td>
<td class="instruction">LD HL,23123</td>
<td class="comment-1" rowspan="1">Set the attribute buffer location of the top of the indicators in <span class="register">HL</span> to 23123 to paint the "UP" section.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27492"></span>27492</td>
<td class="instruction">LD (HL),C</td>
<td class="comment-1" rowspan="3">Write <span class="register">C</span> containing the "UP" indicator colour value to the top left and right of the "UP" indicator.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27493"></span>27493</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27494"></span>27494</td>
<td class="instruction">LD (HL),C</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27495"></span>
<div class="comments">
<div class="paragraph">
The body of the indicator is shared between both "UP" and "DOWN" indicator arrows.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27495"></span>27495</td>
<td class="instruction">LD L,115</td>
<td class="comment-1" rowspan="1">Alter the attribute buffer location to point to the body of the indicator.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27497"></span>27497</td>
<td class="instruction">LD (HL),D</td>
<td class="comment-1" rowspan="3">Write <span class="register">D</span> containing the middle section of the indicator colour value to the middle left and right of the indicator body.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27498"></span>27498</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27499"></span>27499</td>
<td class="instruction">LD (HL),D</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="27500"></span>
<div class="comments">
<div class="paragraph">
Finally, paint the "DOWN" section.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27500"></span>27500</td>
<td class="instruction">LD L,147</td>
<td class="comment-1" rowspan="1">Alter the attribute buffer location to point to the bottom of the indicators to paint the "DOWN" section.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27502"></span>27502</td>
<td class="instruction">LD (HL),E</td>
<td class="comment-1" rowspan="3">Write <span class="register">E</span> containing the "DOWN" indicator colour value to the bottom left and right of the "DOWN" indicator.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27503"></span>27503</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27504"></span>27504</td>
<td class="instruction">LD (HL),E</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27505"></span>27505</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="3">No operation.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27506"></span>27506</td>
<td class="instruction">NOP</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27507"></span>27507</td>
<td class="instruction">NOP</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27508"></span>27508</td>
<td class="instruction">LD HL,30755</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="30754.html#30755">30755</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27511"></span>27511</td>
<td class="instruction">AND %00000011</td>
<td class="comment-1" rowspan="1">Keep only bits 0-1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27513"></span>27513</td>
<td class="instruction">JR Z,<a href="27468.html#27545">Handler_PlayerMovement_2</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27545">Handler_PlayerMovement_2</a> if <span class="register">L</span> is equal to 147.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27515"></span>27515</td>
<td class="instruction">RRCA</td>
<td class="comment-1" rowspan="1">RRCA.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27516"></span>27516</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27517"></span>27517</td>
<td class="instruction">JR NC,<a href="27468.html#27532">Handler_PlayerMovement_0</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27532">Handler_PlayerMovement_0</a> if <span class="register">L</span> is greater than or equal to 147.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27519"></span>27519</td>
<td class="instruction">CP 150</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with 150.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27521"></span>27521</td>
<td class="instruction">LD A,0</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27523"></span>27523</td>
<td class="instruction">JR Z,<a href="27468.html#27545">Handler_PlayerMovement_2</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27545">Handler_PlayerMovement_2</a> if <span class="register">A</span> was equal to 150 on line <a href="27468.html#27519">27519</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27525"></span>27525</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="1">Increment *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27526"></span>27526</td>
<td class="instruction">BIT 7,(HL)</td>
<td class="comment-1" rowspan="1">Test bit 7 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27528"></span>27528</td>
<td class="instruction">JR NZ,<a href="27468.html#27545">Handler_PlayerMovement_2</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27545">Handler_PlayerMovement_2</a> if *<span class="register">HL</span> is not equal to 0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27530"></span>27530</td>
<td class="instruction">JR <a href="27468.html#27543">Handler_PlayerMovement_1</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27543">Handler_PlayerMovement_1</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerMovement_0</td>
<td class="address-2"><span id="27532"></span>27532</td>
<td class="instruction">CP 105</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with 105.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27534"></span>27534</td>
<td class="instruction">LD A,0</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27536"></span>27536</td>
<td class="instruction">JR Z,<a href="27468.html#27545">Handler_PlayerMovement_2</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27545">Handler_PlayerMovement_2</a> if <span class="register">A</span> was equal to 105 on line <a href="27468.html#27532">Handler_PlayerMovement_0</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27538"></span>27538</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-1" rowspan="1">Decrease *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27539"></span>27539</td>
<td class="instruction">BIT 7,(HL)</td>
<td class="comment-1" rowspan="1">Test bit 7 of *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27541"></span>27541</td>
<td class="instruction">JR Z,<a href="27468.html#27545">Handler_PlayerMovement_2</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27545">Handler_PlayerMovement_2</a> if *<span class="register">HL</span> is equal to 0.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerMovement_1</td>
<td class="address-2"><span id="27543"></span>27543</td>
<td class="instruction">LD A,2</td>
<td class="comment-1" rowspan="2">Write 2 to *<a href="30761.html">30761</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerMovement_2</td>
<td class="address-2"><span id="27545"></span>27545</td>
<td class="instruction">LD (30761),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27548"></span>27548</td>
<td class="instruction">LD L,39</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=39.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27550"></span>27550</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Jump to <a href="27468.html#27555">Handler_PlayerMovement_3</a> if *<span class="register">HL</span> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27551"></span>27551</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27552"></span>27552</td>
<td class="instruction">JR Z,<a href="27468.html#27555">Handler_PlayerMovement_3</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27554"></span>27554</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-1" rowspan="1">Decrease *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerMovement_3</td>
<td class="address-2"><span id="27555"></span>27555</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27556"></span>27556</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Jump to <a href="27468.html#27587">Handler_PlayerMovement_5</a> if *<span class="register">HL</span> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27557"></span>27557</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27558"></span>27558</td>
<td class="instruction">JR NZ,<a href="27468.html#27587">Handler_PlayerMovement_5</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27560"></span>27560</td>
<td class="instruction">LD L,35</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=35.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27562"></span>27562</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27563"></span>27563</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27564"></span>27564</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="2">Jump to <a href="27468.html#27587">Handler_PlayerMovement_5</a> if <span class="register">A</span> is equal to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27565"></span>27565</td>
<td class="instruction">JR Z,<a href="27468.html#27587">Handler_PlayerMovement_5</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27567"></span>27567</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27568"></span>27568</td>
<td class="instruction">JR C,<a href="27468.html#27572">Handler_PlayerMovement_4</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27572">Handler_PlayerMovement_4</a> if <span class="register">A</span> is less than *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27570"></span>27570</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="2">Increment *<span class="register">HL</span> by two.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27571"></span>27571</td>
<td class="instruction">INC (HL)</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerMovement_4</td>
<td class="address-2"><span id="27572"></span>27572</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-1" rowspan="1">Decrease *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27573"></span>27573</td>
<td class="instruction">OR (HL)</td>
<td class="comment-1" rowspan="1">Set the bits from *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27574"></span>27574</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27575"></span>27575</td>
<td class="instruction">JR NZ,<a href="27468.html#27587">Handler_PlayerMovement_5</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27587">Handler_PlayerMovement_5</a> if <span class="register">A</span> is not equal to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27577"></span>27577</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27578"></span>27578</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27579"></span>27579</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27580"></span>27580</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1">RLCA.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27581"></span>27581</td>
<td class="instruction">JP NC,<a href="27308.html#27337">27337</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27308.html#27337">27337</a> if <span class="register">L</span> is greater than *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27584"></span>27584</td>
<td class="instruction">JP <a href="27308.html#27408">27408</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27308.html#27408">27408</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerMovement_5</td>
<td class="address-2"><span id="27587"></span>27587</td>
<td class="instruction">LD L,34</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=34.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27589"></span>27589</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27590"></span>27590</td>
<td class="instruction">DEC L</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">L</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27591"></span>27591</td>
<td class="instruction">CP (HL)</td>
<td class="comment-1" rowspan="2">Jump to <a href="27468.html#27627">Handler_PlayerMovement_9</a> if <span class="register">A</span> is equal to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27592"></span>27592</td>
<td class="instruction">JR Z,<a href="27468.html#27627">Handler_PlayerMovement_9</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27594"></span>27594</td>
<td class="instruction">JR C,<a href="27468.html#27609">Handler_PlayerMovement_6</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27609">Handler_PlayerMovement_6</a> if <span class="register">A</span> is less than *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27596"></span>27596</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="1">Increment *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27597"></span>27597</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1">RLCA.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27598"></span>27598</td>
<td class="instruction">JR NC,<a href="27468.html#27626">Handler_PlayerMovement_8</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27626">Handler_PlayerMovement_8</a> if *<span class="register">HL</span> is greater than or equal to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27600"></span>27600</td>
<td class="instruction">LD A,(30759)</td>
<td class="comment-1" rowspan="3">Jump to <a href="27468.html#27621">Handler_PlayerMovement_7</a> if *<a href="30759.html">30759</a> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27603"></span>27603</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27604"></span>27604</td>
<td class="instruction">JR Z,<a href="27468.html#27621">Handler_PlayerMovement_7</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27606"></span>27606</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-1" rowspan="1">Decrease *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27607"></span>27607</td>
<td class="instruction">JR <a href="27468.html#27626">Handler_PlayerMovement_8</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27626">Handler_PlayerMovement_8</a>.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerMovement_6</td>
<td class="address-2"><span id="27609"></span>27609</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-1" rowspan="1">Decrease *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27610"></span>27610</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1">RLCA.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27611"></span>27611</td>
<td class="instruction">JR C,<a href="27468.html#27626">Handler_PlayerMovement_8</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27468.html#27626">Handler_PlayerMovement_8</a> if *<span class="register">HL</span> is less than <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27613"></span>27613</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="1">Increment *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27614"></span>27614</td>
<td class="instruction">LD A,(30759)</td>
<td class="comment-1" rowspan="3">Jump to <a href="27468.html#27626">Handler_PlayerMovement_8</a> if *<a href="30759.html">30759</a> is not zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27617"></span>27617</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27618"></span>27618</td>
<td class="instruction">JR NZ,<a href="27468.html#27626">Handler_PlayerMovement_8</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27620"></span>27620</td>
<td class="instruction">DEC (HL)</td>
<td class="comment-1" rowspan="1">Decrease *<span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerMovement_7</td>
<td class="address-2"><span id="27621"></span>27621</td>
<td class="instruction">LD A,3</td>
<td class="comment-1" rowspan="2">Write 3 to *<a href="30759.html">30759</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27623"></span>27623</td>
<td class="instruction">LD (30759),A</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerMovement_8</td>
<td class="address-2"><span id="27626"></span>27626</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1">No operation.</td>
</tr>
<tr>
<td class="asm-label">Handler_PlayerMovement_9</td>
<td class="address-2"><span id="27627"></span>27627</td>
<td class="instruction">LD L,34</td>
<td class="comment-1" rowspan="1"><span class="register">L</span>=34.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27629"></span>27629</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27630"></span>27630</td>
<td class="instruction">LD DE,23109</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=23109 (attribute buffer location).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27633"></span>27633</td>
<td class="instruction">CALL <a href="26752.html">DisplaySpeedometer</a></td>
<td class="comment-1" rowspan="1">Call <a href="26752.html">DisplaySpeedometer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27636"></span>27636</td>
<td class="instruction">LD A,(30755)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="30754.html#30755">30755</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27639"></span>27639</td>
<td class="instruction">LD E,133</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=133.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="27641"></span>27641</td>
<td class="instruction">JP <a href="27944.html">27944</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="27944.html">27944</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="27464.html">27464</a>
</td>
<td class="up">Up: <a href="../maps/all.html#27468">Map</a></td>
<td class="next">
Next: <a href="27644.html">27644</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1983 Microsphere &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.6.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/wheelie/">Source code</a>.</div>
<div><a href="../../asm/6B4C.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>